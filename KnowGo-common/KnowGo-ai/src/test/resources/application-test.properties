# KnowGo AI 模块集成测试配置文件

# 日志配置
logging.level.com.fw.know.go.ai=DEBUG
logging.level.org.springframework.ai=INFO
logging.level.io.github.resilience4j=INFO

# AI服务配置
spring.ai.openai.api-key=test-api-key
spring.ai.openai.base-url=http://localhost:8080/v1
spring.ai.openai.chat.options.model=gpt-3.5-turbo
spring.ai.openai.chat.options.temperature=0.7
spring.ai.openai.chat.options.max-tokens=1000

# DashScope配置
spring.ai.dashscope.api-key=test-dashscope-key
spring.ai.dashscope.base-url=http://localhost:8080/v1
spring.ai.dashscope.chat.options.model=qwen-turbo
spring.ai.dashscope.chat.options.temperature=0.7
spring.ai.dashscope.chat.options.max-tokens=1000

# 缓存配置
spring.cache.type=simple
spring.cache.cache-names=ai-prompt-results
spring.cache.simple.time-to-live=3600000

# 中间件配置
# 重试中间件
spring.ai.retry.max-attempts=3
spring.ai.retry.delay=1000

# 熔断中间件
spring.ai.circuit-breaker.failure-rate-threshold=50
spring.ai.circuit-breaker.wait-duration-in-open-state=60000
spring.ai.circuit-breaker.sliding-window-size=100

# 限流中间件
spring.ai.rate-limiter.limit-for-period=10
spring.ai.rate-limiter.limit-refresh-period=1s

# 模板引擎配置
velocity.input.encoding=UTF-8
velocity.output.encoding=UTF-8
velocity.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader

# 多模态内容配置
spring.ai.image.options.model=dall-e-2
spring.ai.image.options.size=512x512
spring.ai.image.options.response-format=url

# 异步执行配置
spring.ai.async.core-pool-size=5
spring.ai.async.max-pool-size=10
spring.ai.async.queue-capacity=100
spring.ai.async.keep-alive-time=60s

# 测试容器配置
testcontainers.docker.client.strategy=org.testcontainers.dockerclient.WindowsClientProviderStrategy

# 监控配置
management.metrics.enable.all=true
management.metrics.distribution.slo.ai.service.execution.time=100ms,500ms,1s,2s
management.metrics.distribution.percentiles.ai.service.execution.time=0.5,0.9,0.95,0.99

# 测试配置
spring.main.allow-bean-definition-overriding=true
spring.test.database.replace=none